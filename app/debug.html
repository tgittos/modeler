<!doctype html>
<html>
  <head>
    <title>Modeler - DEBUG</title>
    <link href="css/reset.css" rel="stylesheet" />
    <script type="text/javascript" src="../lib/webgl-mjs/mjs.js"></script>
    <script type="text/javascript" src="../src/utils/mjs.js"></script>
    <script type="text/javascript" src="../src/utils/language.js"></script>
    <script type="text/javascript" src="../src/Modeler.js"></script>
    <script type="text/javascript" src="../src/utils/Event.js"></script>
    <script type="text/javascript" src="../src/keyboard/Listener.js"></script>
    <script type="text/javascript" src="../src/io/SyncLoader.js"></script>
    <script type="text/javascript" src="../src/core/Vertex.js"></script>
    <script type="text/javascript" src="../src/core/Face3.js"></script>
    <script type="text/javascript" src="../src/core/Face4.js"></script>
    <script type="text/javascript" src="../src/core/Geometry.js"></script>
    <script type="text/javascript" src="../src/core/Mesh.js"></script>
    <script type="text/javascript" src="../src/primitives/Primitive.js"></script>
    <script type="text/javascript" src="../src/primitives/Cube.js"></script>
    <script type="text/javascript" src="../src/primitives/Pyramid.js"></script>
    <script type="text/javascript" src="../src/primitives/Plane.js"></script>
    <script type="text/javascript" src="../src/primitives/Sphere.js"></script>
    <script type="text/javascript" src="../src/core/Scene.js"></script>
    <script type="text/javascript" src="../src/core/Camera.js"></script>
    <script type="text/javascript" src="../src/core/Object3D.js"></script>
    <script type="text/javascript" src="../src/core/Shader.js"></script>
    <script type="text/javascript" src="../src/redback/Redback.js"></script>
    <script type="text/javascript" src="../src/redback/core/WebGLRenderer.js"></script>
    <script type="text/javascript" src="../src/redback/core/WebGLObject.js"></script>
    <script type="text/javascript" src="../src/redback/core/WebGLSceneGraph.js"></script>
    <script type="text/javascript" src="../src/redback/core/WebGLSceneGraphNode.js"></script>
    <script type="text/javascript" src="../src/redback/materials/Enums.js"></script>
    <script type="text/javascript" src="../src/redback/materials/WebGLMaterial.js"></script>
    <script type="text/javascript" src="../src/redback/materials/WebGLSolidColourMaterial.js"></script>
    <script type="text/javascript" src="../src/redback/materials/WebGLTextureMaterial.js"></script>
    <script type="text/javascript" src="../src/redback/shaders/WebGLShader.js"></script>
    <script type="text/javascript" src="../src/redback/textures/WebGLTexture.js"></script>
    <!--script type="text/javascript" src="demos/rotating-objects.js" -->
    <script type="text/javascript">
    var renderer;
    function pageLoaded() {
      
      var scene = REDBACK.Core.WebGLSceneGraph();
      var camera = MODELER.Camera();

      var cube;
      
      // first load texture
      var material;
      material = REDBACK.Materials.WebGLSolidColourMaterial({ 
        wireframe: true, 
        wireframe_mode: REDBACK.Enum.WIREFRAME_MODE.WIREFRAME_ONLY
      });
      MODELER.Event.listen(MODELER.EVENTS.MATERIAL.MATERIAL_LOADED, function(d){
        cube = MODELER.Primitive.Cube({
          material: material
					,z: -10, x: 3
					,rotVector: [0, 1, 0]
					,rotDegrees: 45
        });
        pyramid = MODELER.Primitive.Pyramid({
          material: material
          ,z: -10, x: -3
          ,rotVector: [1, 1, 0]
          ,rotDegrees: 45
        });
        scene.addObject(cube);
        scene.addObject(pyramid);
        render();
      }, true);
      
      renderer = REDBACK.Core.WebGLRenderer( { scene: scene, camera: camera} );
      resizeViewport();
      
      //Render loop
      var lastTime = 0;
      function render() {
	
        var timeNow = new Date().getTime();
        if (lastTime != 0) {
          var elapsed = timeNow - lastTime;
          
          //Do rendering magicks
          cube.rotDegrees += (90 * elapsed) / 1000.0;
          //plane.rotDegrees += (90 * elapsed) / 1000.0;
        }
        lastTime = timeNow;

        renderer.render();
        requestAnimationFrame(render);
      };
    };
    function resizeViewport(e) {
      renderer.setSize(window.innerWidth - 4, window.innerHeight - 4);
    };
    window.onload = pageLoaded;
    window.onresize = resizeViewport;
    </script>
  </head>
  <body>
  </body>
</html>
