<!doctype html>
<html>
  <head>
    <title>Modeller - DEBUG</title>
    <link href="http://meyerweb.com/eric/tools/css/reset/reset.css" rel="stylesheet" />
    <script type="text/javascript" src="../lib/webgl-mjs/mjs.js"></script>
    <script type="text/javascript" src="../src/utils/mjs.js"></script>
    <script type="text/javascript" src="../src/utils/language.js"></script>
    <script type="text/javascript" src="../src/Modeler.js"></script>
    <script type="text/javascript" src="../src/utils/Event.js"></script>
    <script type="text/javascript" src="../src/io/SyncLoader.js"></script>
    <script type="text/javascript" src="../src/core/Vertex.js"></script>
    <script type="text/javascript" src="../src/core/Face3.js"></script>
    <script type="text/javascript" src="../src/core/Face4.js"></script>
    <script type="text/javascript" src="../src/core/Geometry.js"></script>
    <script type="text/javascript" src="../src/core/Mesh.js"></script>
    <script type="text/javascript" src="../src/primitives/Cube.js"></script>
    <script type="text/javascript" src="../src/primitives/Pyramid.js"></script>
    <script type="text/javascript" src="../src/materials/Basic.js"></script>
    <script type="text/javascript" src="../src/core/Scene.js"></script>
    <script type="text/javascript" src="../src/core/Camera.js"></script>
    <script type="text/javascript" src="../src/core/Object3D.js"></script>
    <script type="text/javascript" src="../src/core/Shader.js"></script>
    <script type="text/javascript" src="../src/renderer/WebGLRenderer.js"></script>
    <script type="text/javascript" src="../src/materials/WebGLShader.js"></script>
    <!--script type="text/javascript" src="demos/rotating-objects.js" -->
    <script type="text/javascript">
    var renderer;
    function pageLoaded() {

      var scene = MODELER.Scene();
      var camera = MODELER.Camera();
      
      var pyramid, cube;
      
      MODELER.Event.listen(MODELER.EVENTS.MATERIAL.MATERIAL_LOADED, function(d){
        //Send some geometry to the scene
        pyramid = MODELER.Pyramid({
          width: 2, height: 2, depth: 2,
          x: -1.5, y: 0.0, z: -5.0,
          rotVector: V3.y,
          material: material
        });
        scene.addChild(pyramid);

        cube = MODELER.Cube({
          width: 2, height: 2, depth: 2,
          x: 1.5, y: 0.0, z: -5.0,
          rotVector: [1, 1, 0],
          rotDegrees: 45,
          material: material
        });
        scene.addChild(cube);
        render();
      }, true);
      
      var material = MODELER.Materials.Basic({ 
        wireframe: true, 
        wireframe_mode: MODELER.Materials.Basic.WIREFRAME_MODE.WIREFRAME_ONLY
      });
      
      renderer = MODELER.WebGLRenderer( { scene: scene, camera: camera} );
      resizeViewport();
      
      //Render loop
      var lastTime = 0;
      function render() {
        var timeNow = new Date().getTime();
        if (lastTime != 0) {
          var elapsed = timeNow - lastTime;
          
          //Do rendering magicks
          cube.rotDegrees += (90 * elapsed) / 1000.0;
          pyramid.rotDegrees += (90 * elapsed) / 1000.0;
        }
        lastTime = timeNow;
        
        renderer.render();
        requestAnimationFrame(render);
      };
    };
    function resizeViewport(e) {
      renderer.setSize(window.innerWidth - 4, window.innerHeight - 4);
    };
    window.onload = pageLoaded;
    window.onresize = resizeViewport;
    </script>
  </head>
  <body>
  </body>
</html>
